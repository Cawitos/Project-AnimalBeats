<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='img/logoico.png') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/Administrador.css') }}?v=2">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a0994db117.js" crossorigin="anonymous"></script>
</head>

<body>

  <div class="menu">
    <button class="btn btn-danger" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions"
      aria-controls="offcanvasWithBothOptions">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFF">
        <path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z" />
      </svg> MENU
    </button>
  </div>

  <div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions"
    aria-labelledby="offcanvasWithBothOptionsLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">
        <a href="{{ url_for('user_bp.dashboard_admin') }}" class="animalbeats">
          <img src="{{ url_for('static', filename='img/logo-corto.png') }}" alt="">
          <span class="nav-logo">AnimalBeats</span>
        </a>
      </h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <li>
        <a href="{{ url_for('gestion_bp.gestion_usuarios') }}" class="opcion">
          <i class="fa-solid fa-users"></i>
          <span class="item-nav">Usuarios</span>
        </a>
      </li>
      <li>
        <a href="../Administrador/GestionMascotas.html" class="opcion">
          <svg xmlns="http://www.w3.org/2000/svg" width="40px" height="40px" viewBox="0 -960 960 960" fill="#000">
            <path
              d="M180-475q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29Zm180-160q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29Zm240 0q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29Zm180 160q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29ZM266-75q-45 0-75.5-34.5T160-191q0-52 35.5-91t70.5-77q29-31 50-67.5t50-68.5q22-26 51-43t63-17q34 0 63 16t51 42q28 32 49.5 69t50.5 69q35 38 70.5 77t35.5 91q0 47-30.5 81.5T694-75q-54 0-107-9t-107-9q-54 0-107 9t-107 9Z" />
          </svg>
          <span class="item-nav">Mascotas</span>
        </a>
      </li>
      <li>
        <a href="../Administrador/GestionConsultas.html" class="opcion">
          <svg xmlns="http://www.w3.org/2000/svg" width="40px" height="40px" viewBox="0 -960 960 960" fill="#000">
            <path
              d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z" />
          </svg>
          <span class="item-nav">Consultas</span>
        </a>
      </li>
      <li>
        <a href="../Administrador/GestionReportes.html" class="opcion">
          <svg xmlns="http://www.w3.org/2000/svg" width="40px" height="40px" viewBox="0 -960 960 960" fill="#000">
            <path
              d="M200-120v-680h360l16 80h224v400H520l-16-80H280v280h-80Zm300-440Zm86 160h134v-240H510l-16-80H280v240h290l16 80Z" />
          </svg>
          <span class="item-nav">Reportes</span>
        </a>
      </li>
      <li>
        <a href="../index.html" class="salir">
          <svg xmlns="http://www.w3.org/2000/svg" width="40px" height="40px" viewBox="0 0 24 24" fill="#000">
            <path d="M10 17l5-5-5-5v10zM4 4h2v16H4V4zm16 0h-6v2h6v12h-6v2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2z"></path>
          </svg>
          <span class="item-nav">Salir</span>
        </a>
      </li>
    </div>
  </div>

  <div class="contenedor-dashboard">
    <main class="contenido-principal">
      <h1>Gestión de usuarios</h1>
      <div class="contenedor-tabla">
        <table id="tabla-usuarios" class="table table-striped">
          <thead>
            <tr>
              <th>Código</th>
              <th>Correo</th>
              <th>Consultar</th>
              <th>Modificar</th>
              <th>Suspender</th>
            </tr>
          </thead>
          <tbody>
            {% for u in usuarios %}
            <tr>
              <td>{{ u.tipo }} - {{ u.n_documento }}</td>
              <td>{{ u.correoelectronico }}</td>
              <td><a href="{{ url_for('gestion_bp.consultar_usuario', id=u.n_documento) }}"><i
                    class="fa-solid fa-eye text-danger"></i></a></td>
              <td><a href="{{ url_for('gestion_bp.modificar_usuario', id=u.n_documento) }}"><i
                    class="fa-solid fa-pen text-danger"></i></a></td>
              <td>
                <button class="btn-suspender"  data-id="{{ u.n_documento }}">
                  <i class="fa-solid fa-user-lock"></i>
                </button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </main>
  </div>

  <div class="text-center mt-4">
    <a href="{{ url_for('gestion_bp.crear_usuario') }}" class="btn btn-danger btn-lg">
      <i class="fa-solid fa-user-plus"></i> Crear usuario
    </a>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


  <script>
    document.querySelectorAll('.btn-suspender').forEach(btn => {
      btn.addEventListener('click', function () {
        const id = this.getAttribute('data-id');
        Swal.fire({
          title: '¿Estás seguro?',
          text: 'Este usuario será suspendido y no podrá iniciar sesión.',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonText: 'Sí, suspender',
          cancelButtonText: 'Cancelar'
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = `/usuario/${id}/eliminar`;
          }
        });
      });
    });
  </script>


</body>

</html>